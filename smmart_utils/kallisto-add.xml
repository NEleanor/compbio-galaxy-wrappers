<tool id="kallisto-add" name="Kallisto Add" version="@VERSION@.0" profile="17.09">

    <description></description>

    <macros>
        <import>macros.xml</import>
    </macros>

    @VERSION_CMD@

    <expand macro="requirements"/>

    <command detect_errors="exit_code"><![CDATA[
        smmart_utils kallisto-add 
        $merged_mat
        $kallisto_tsv
        $sample
    ]]></command>

    <inputs>
        <param name="merged_mat" type="data" format="tsv,tabular" label="Pre-merged matrix"/>
        <param name="kallisto_tsv" type="data" format="tsv,tabular" label="Sample Kallisto Output"/>
        <param name="sample" type="text" label="Sample Name"/>
    </inputs>

    <outputs>
        <data name="output" format="tsv" from_work_dir="output.tsv" label="${tool.name} on ${on_string}: Merged Expression Matrix"/>
    </outputs>

    <help><![CDATA[
        This command takes a pre-merged gene-level expression matrix (in TPMs) and the abundance.tsv output from Kallisto. The abundance.tsv is summarized to gene-level and then merged with the matrix.
        
        Usage: smmart_utils kallisto-add <smmart expression matrix> <kallisto tsv> <sample name> 
            
    ]]></help>

</tool>
