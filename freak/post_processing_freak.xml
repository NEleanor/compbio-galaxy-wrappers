<tool id="post_freak" name="Freak Post Processing" version="@VERSION@.0" profile="17.09">

    <description>Post Processing for Freak Output</description>

    <macros>
        <import>macros.xml</import>
    </macros>

    @VERSION_CMD@

    <expand macro="requirements"/>

    <command detect_errors="exit_code"><![CDATA[
    python3 ${__tool_directory__}/post_processing_freak.py "$freak_data" "$ref" "$sample_id" -d -o "$output";

    #if $name_output.specify_name
    ln -s "$output" "$name_output.output"
    #end if

    ]]></command>

    <inputs>
        <param type="data" name="freak_data" format="txt,tsv,tabular" label="Freak Output" help=""/>
        <param type="data" name="ref" format="txt,tsv,tabular" label="CNA Reference" help=""/>
        <param type="text" name="sample_id" label="Sample ID" help=""/>
        <conditional name="name_output">
            <param name="specify_name" type="boolean" value="false" label="Specify Output Filename"/>
            <when value="true">
                <param name="output" type="text" label="Filename"/>
            </when>
        </conditional>
    </inputs>

    <outputs>
        <data name="output" format="tsv" label="Freak_processed.tsv"/>
    </outputs>

    <tests>
        <test>
            <param name="freak_data" value="dummy_freak_34.tsv"/>
            <param name="ref" value="dummy_ref.tsv"/>
            <param name="sample_id" value="34"/>
            <output name="output" file="processed_freak_34.tsv"/>
        </test>
    </tests>


    <help><![CDATA[
    usage: post_processing_freak.py [-h] [-d] [-o OUTPUT] freak_out variant_ref
    
    Post processing for freak output
    
    positional arguments:
      freak_out
      variant_ref
    
    optional arguments:
      -h, --help            show this help message and exit
      -d, --no-dups
      -o OUTPUT, --output OUTPUT
    ]]></help>
</tool>
